apiVersion: v1
kind: ConfigMap
metadata:
  name: telemetry-server-app-config
data:
  application.properties: |
    #spring.profiles.active=develop,navdemo
    spring.profiles.active=develop
    
    server.port=8200
    
    #Postgresql connection params
    app.datasource.main.driver-class-name=org.postgresql.Driver
    app.datasource.main.jdbc-url=jdbc:postgresql://postgres:5432/tms
    app.datasource.main.username=tmsuser
    app.datasource.main.password=tmsuser
    app.datasource.main.pool-size=30
    
    #Rabbitmq connection params
    spring.rabbitmq.host=localhost
    spring.rabbitmq.port=5672
    spring.rabbitmq.virtual-host=tmsvhost
    spring.rabbitmq.username=tmsuser
    spring.rabbitmq.password=tmspassword
      
    spring.rabbitmq.publisher-returns=true
    spring.rabbitmq.template.mandatory=true
    spring.rabbitmq.listener.simple.retry.enabled=true
    
    #Signiture verification
    package.signer.public.key=TelemetryServer/cert/pub-key.pem
    package.verify.signature=false
    
    #Subsystem url value mapping to address
    subsystem.mapping={'afe': 'http://localhost:8200', 'fcu': 'http://localhost:8300'}
    
    #Headers should be included from the proxy request. Every list element is a regex expression
    included.proxy.headers={'^X-Forwarded-For$','^Forwarded$','^Content-Type$', '^Accept$', '^Accept-Charset$', '^Accept-Datetime$', '^Accept-Language$', '^Content-MD5$', '^Cookie$', '^Date$', '^X-Client-Cert$', '^Client-Cert$', '^X-Client-Cert-Chain$', '^Client-Cert-Chain$' }
    
    #Headers should be included from the proxy response. Every list element is a regex expression
    included.proxy.response.headers={'^Content-Type$', '^Cache-Control$', '^Content-MD5$', '^Expires$', '^Last-Modified$', '^Set-Cookie$', '^Content-Disposition$' }
    
    #Connection timeout
    server.tomcat.connection-timeout=60s
    spring.mvc.async.request-timeout=600s
    
    #Max file size and max request size
    spring.servlet.multipart.max-file-size=5MB
    spring.servlet.multipart.max-request-size=5MB
    
    #Package element removal cron
    package.element.delete.cron=15 0 0 * * *
    
    #Statistic
    statistic.device.cron=0 0 * * * *
    statistic.clean.up.cron=10 0 0 * * 1
    
    # Given in hours
    statistic.cleanup.min.turningpoint=24
    statistic.cleanup.hour.turningpoint=720
    statistic.cleanup.day.turningpoint=8760
    statistic.cleanup.week.turningpoint=43800
